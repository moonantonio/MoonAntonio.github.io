<!DOCTYPE html>
<html lang="es-es">
<head>
	<title>Aprende C&#43;&#43; con Unreal - Variables&middot; Antonio Moon´s</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Moon Antonio">
	<meta name="description" content="un blog sobre mi, juegos, desarrollo y anime">
	<meta name="keywords" content="Moon,Antonio,Dev,Game">
	<meta name="generator" content="Hugo 0.50" />

	<!-- CSS -->
	<link rel="stylesheet" href="https://moonantonio.github.io/css/main.css">
	<link id="dark-mode-theme" rel="stylesheet" href="/css/dark.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="https://moonantonio.github.io/favicon.ico" type="image/x-icon">

	<!-- RSS -->
	

	<!-- Font Awesome -->
	<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <header class="site-header">
	<div class="branding">
		<a href="https://moonantonio.github.io/">
		<img class="avatar" src="https://moonantonio.github.io/img/avatar.png" alt="avatar"/>
		</a>
		<h1 class="site-title">
			<i class="fa fa-angle-right"></i>
			<a href="https://moonantonio.github.io/">Antonio Moon´s</a>
			<span class="logo-cursor "></span>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			<li><a href="/about/">  </a></li>

			<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/devblog/" title="devBlog">
  		</i>&nbsp; devBlog</a> <i class="fa fa-gamepad" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/backdoor" title="backDoor">
  		</i>&nbsp; backDoor</a> <i class="fa fa-black-tie" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://github.com/MoonAntonio/rec.repos" title="src">
  		</i>&nbsp; src</a> <i class="fa fa-code" aria-hidden="true"></i>
  </a>
</li>

<li class="list-group">
  <a class="list-group-item" href="https://moonantonio.github.io/portfolio/" title="moon">
  		</i>&nbsp; moon</a> <i class="fa fa-terminal" aria-hidden="true"></i>
  </a>
</li>

<li class="icon">
	<a href="https://moonantonio.github.io/" title="&#43;">
		</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>
	</a>
</li>





<li>
	<a href="mailto:antoniomt.moon@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>











<li>
	<a href="https://github.com/MoonAntonio" title="GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>

























<li>
	<a href="https://gitlab.com/MoonAntonio" title="Gitlab">
		<i class="fa fa-fw fa-gitlab"></i>
	</a>
</li>

<li>
	<a href="https://trello.com/antoniomoon" title="Trello">
		<i class="fa fa-fw fa-trello"></i>
	</a>
</li>



			<a id="dark-mode-toggle" class="fa fa-moon-o" title="darkmode"></a>
		</ul>
	</nav>
</header>

    <div class="content">
    <script src="https://moonantonio.github.io/js/darkmode.js"></script>
	<article class="feature-image">
		<header style="background-image: url('https://moonantonio.github.io/img/b/b002.jpg')">
			<h1 class="title">Aprende C&#43;&#43; con Unreal - Variables</h1>
		</header>

	<section class="post-content">
		

<p>Si yo fuera un modelo de datos de una maquina, habría variables que me describirían incluyendo una para hacer referencia a mi nombre (un valor que no ha cambiado) y mi edad (un valor que cambia cada año). Algunas variables solo pueden ser determinadas por mí, como el nombre de mi película favorita, y otras pueden ser controladas total o parcialmente por fuentes externas, como mi estado civil. Todos estos tipos de relaciones se pueden modelar en código cuando conoces el vocabulario correcto. En esta lección, crearemos una clase que implemente el ejemplo que acabo de proporcionar.</p>

<p><center><a href="https://github.com/CodeBackDoor/LearnCppUnreal" class="button"><i class="fa fa-github-alt"></i>GitHub Repo</a><a href="https://gitlab.com/CodeBackDoor/LearnCppUnreal" class="button"><i class="fa fa-gitlab"></i>GitLab Repo</a></center></p>

<h2 id="modelando-un-humano">Modelando un humano</h2>

<p>Para comenzar, crea una nueva escena. Vamos a agregar una nueva clase c++ dándole al botón de &ldquo;Add New&rdquo; -&gt; New C++ Class -&gt; Actor -&gt; Nombre: Humano. Cuando se cree la clase, le daremos doble click para que se nos inicie en visual studio.</p>

<p>Ahora nuestro archivo Humano.h lo dejaremos asi:</p>

<hr />

<pre><code class="language-C++">#pragma once

#include &quot;CoreMinimal.h&quot;
#include &quot;GameFramework/Actor.h&quot;
#include &quot;Humano.generated.h&quot;

UCLASS()
class LEARNCPPUNREAL_API AHumano : public AActor
{
    GENERATED_BODY()
};
</code></pre>

<hr />

<p>y nuestro archivo Humano.cpp:</p>

<hr />

<pre><code class="language-C++">#include &quot;Humano.h&quot;

</code></pre>

<hr />

<p>Esto es lo mas limpio que podemos dejar las clases. Ahora como en la anterior sección, vamos a implementar el método BeginPlay() junto con un Debug.</p>

<hr />

<pre><code class="language-C++">#pragma once

#include &quot;CoreMinimal.h&quot;
#include &quot;GameFramework/Actor.h&quot;
#include &quot;Humano.generated.h&quot;

UCLASS()
class LEARNCPPUNREAL_API AHumano : public AActor
{
    GENERATED_BODY()

public:
    FString name = &quot;Moon&quot;;

protected:
    virtual void BeginPlay() override;
};

</code></pre>

<hr />

<hr />

<pre><code class="language-C++">#include &quot;Humano.h&quot;


void AHumano::BeginPlay()
{
    Super::BeginPlay();
    UE_LOG(LogTemp, Warning, TEXT(&quot;Hola, mi nombre es %s&quot;), *name);
}

</code></pre>

<hr />

<p>Antes de explicarlo, me gustaría que volvieras al editor y clicaras el botón compile. Esto realizara un procesamiento para ver que archivos han cambiado y actualizarlos en el editor, para que los cambios se vean reflejados cuando reproduzcamos la solución. Cada vez que cambies algo en Visual Studio, tienes que compilar.</p>

<p><center><img src="/img/codebackdoor/learncppunreal/03.png" alt="001" /></center>
<center><img src="/img/codebackdoor/learncppunreal/04.png" alt="001" /></center></p>

<p>Después solo tenéis que arrastras la clase Humano al escenario y veréis como os sale el mensaje por consola.</p>

<p><center><img src="/img/codebackdoor/learncppunreal/05.png" alt="001" /></center></p>

<p>Explicare esta parte, empezando por el .h, como se ve, en el bloque public he creado una variables FString con nombre name y valor Moon.</p>

<p>Lo que hemos hecho es &ldquo;leer&rdquo; o &ldquo;obtener&rdquo; el valor almacenado por una variable llamada &ldquo;name&rdquo;, anexarlo a la cadena de texto y pasar todo el mensaje como un parámetro al método que imprimió el mensaje a la consola.</p>

<p>Para &ldquo;escribir&rdquo; o &ldquo;establecer&rdquo; una variable, usamos algo llamado operador de asignación. Para confundirte, los programadores de hace mucho tiempo decidieron que este operador se vería como el signo igual (y para comprobar realmente la igualdad, decidieron usar DOS signos iguales - suspiro). Entonces, para &ldquo;escribir&rdquo; o &ldquo;establecer&rdquo; una variable, puede usar una línea de código como la siguiente:</p>

<hr />

<pre><code class="language-C++">name = &quot;Moon&quot;;
</code></pre>

<hr />

<p>Si tuviera que poner esa línea de código en el método de BeginPlay sobre la línea que imprime el mensaje &ldquo;Hola&rdquo;, cuando ejecute la escena, tendrá dos personas que lo recibirán con el mensaje &ldquo;Hola, mi nombre es Moon&rdquo;. Mientras que la escena continúe, Moon será su nombre, como puede verificar en la consola. Sin embargo, cuando detenga la escena, los nombres volverán a los valores que tenían antes de presionar play (en mi caso, Moon).</p>

<h2 id="campos">Campos</h2>

<p>Nuestro humano no tiene una variable por edad, así que a continuación le mostraré cómo &ldquo;declarar&rdquo; su propia variable llamada &ldquo;campo&rdquo;. Como mínimo, todas las variables deben declararse con dos cosas, un &ldquo;Tipo de datos&rdquo; y un &ldquo;Nombre&rdquo; mediante el cual usted &ldquo;identifica&rdquo; la variable. Agregue la siguiente línea a su script, dentro de la clase (entre los corchetes), pero fuera de los métodos. Por convención, la mayoría de las variables de nivel de clase aparecen en la parte superior de la clase.</p>

<hr />

<pre><code class="language-C++">public:
    FString name = &quot;Moon&quot;;
    int32 edad = 30;
</code></pre>

<hr />

<h3 id="consejo">Consejo:</h3>

<p>Hay muchos tipos de datos que puede elegir al declarar sus variables (consulte la lista completa aquí: <a href="https://docs.unrealengine.com/en-us/Programming/Development/CodingStandard">https://docs.unrealengine.com/en-us/Programming/Development/CodingStandard</a>) . Los más comunes que querrás incluir son:</p>

<ul>
<li>bool - este es un tipo de valor que por defecto es falso, y solo puede contener &ldquo;falso&rdquo; o &ldquo;verdadero&rdquo;</li>
<li>int32 - este es un tipo de valor que por defecto es 0, y puede contener números enteros, por ejemplo: 42</li>
<li>float: este es un tipo de valor que por defecto es 0 y puede contener números con decimales, por ejemplo: 3.14159f</li>
<li>FString - un tipo especial que tiene como valor predeterminado null (nothing), y puede contener matrices de caracteres,como: &ldquo;Hola&rdquo;</li>
</ul>

<p>Como es usuario de Unreal, también usará con frecuencia otros tipos de datos, como:</p>

<ul>
<li>Objetos: este es un tipo de referencia cuyo valor predeterminado es nulo y puede contener una referencia a un objeto activo.</li>
<li>FColor: este es un tipo de valor que por defecto es nulo y puede contener un RGB.</li>
<li>FVector - este es un tipo de valor (una estructura) que por defecto es cero en cada uno de sus subcampos (x, y , z).</li>
</ul>

<p>Hay varias otras palabras que pueden aparecer en una declaración de variable antes del tipo de datos. &ldquo;Solo lectura&rdquo; indica una variable que solo se puede asignar en el momento en que se crea un objeto (por una clase &ldquo;Constructor&rdquo; o mientras se inicia la variable). &ldquo;Const&rdquo; es similar, pero debe inicializarse solo en la declaración. &ldquo;Estático&rdquo; indica una variable que pertenece a la clase misma en lugar de instancias de la clase (por ejemplo, muchas de las variables en la clase &ldquo;Time&rdquo; son estáticas).</p>

<hr />

<p>Al declarar la variable en el nivel raíz de nuestra clase, le estamos dando un &ldquo;alcance&rdquo; de nivel de clase. Esto significa que la variable será visible en todas partes dentro de la clase(.cpp y .h), incluso dentro de los métodos dentro de la clase. Tenga en cuenta que también puede declarar variables dentro de un método, pero su alcance será más limitado, y otros métodos o clases no tendrán acceso a esas variables.</p>

<p>Guarde su script y regrese a Unreal. Mira a uno de tus Humanos e intenta establecer la variable de nombre/edad que acabamos de declarar &hellip; oye espera, ¿por qué no lo vemos? Las variables tienen algo llamado &ldquo;visibilidad&rdquo;. Cuando no se especifica la visibilidad de una variable, se predetermina a &ldquo;private&rdquo;, lo que significa que solo su clase sabe que existe. Unreal solo muestra variables que están marcadas como &ldquo;public&rdquo; o por &ldquo;Blueprint&rdquo;, que es una forma especial de exponer una propiedad al inspector de Unreal sin permitir que otros scripts conozcan la variable. Cualquiera de las siguientes líneas permitirá que su variable aparezca en el inspector:</p>

<hr />

<pre><code class="language-C++">#pragma once

#include &quot;CoreMinimal.h&quot;
#include &quot;GameFramework/Actor.h&quot;
#include &quot;Humano.generated.h&quot;

UCLASS()
class LEARNCPPUNREAL_API AHumano : public AActor
{
    GENERATED_BODY()

public:
    UPROPERTY(EditAnywhere)
    FString name = &quot;Moon&quot;;
    UPROPERTY(VisibleAnywhere)
    int32 edad = 30;

protected:
    virtual void BeginPlay() override;
};

</code></pre>

<hr />

<p>Antes de continuar, vamos a dirigirnos a nuestra clase, le daremos click derecho y crearemos un blueprint basado en ella.</p>

<p><center><img src="/img/codebackdoor/learncppunreal/06.png" alt="001" /></center></p>

<p>Esto nos creara un nuevo blueprint que tenga de herencia nuestra clase humano. Ahora arrastramos a la escena nuestro BP MyHumano. Dentro del BP veremos en las variables que salen las dos que creamos.</p>

<p><center><img src="/img/codebackdoor/learncppunreal/07.png" alt="001" /></center></p>

<p>Ahora cualquier cambio que realicemos en el nombre, cambiara el resultado. Por ejemplo colocando dos BP con el nombre de Moon y Andrea, este es el resultado.</p>

<p><center><img src="/img/codebackdoor/learncppunreal/08.png" alt="001" /></center></p>

<p>Como vemos, podemos editar el valor de nuestra variables desde el inspector por medio de nuestro BP que hereda de la clase Humano, pero cual es la explicación a que no podamos editar nuestra edad. La respuesta es por el tipo de macro que definimos.</p>

<ul>
<li>UPROPERTY(EditAnywhere): Es posible editarse.</li>
<li>UPROPERTY(VisibleAnywhere): Solo es posible verse</li>
</ul>

<p>Ademas de ese parametro de la macro, podemos definir otro más por si queremos tener acceso a esos valores desde nuestros blueprints. Estos parámetros son:</p>

<ul>
<li>UPROPERTY(EditAnywhere, BlueprintReadOnly): Es posible editarse, pero no se tiene acceso desde los BP.</li>
<li>UPROPERTY(VisibleAnywhere, BlueprintReadWrite): Solo es posible verse, no editarse desde el inspector pero accesible desde BP.</li>
</ul>

<h1 id="resumen">Resumen</h1>

<p>En esta lección, cubrimos cómo declarar, leer y escribir valores en variables. También aprendimos que las propiedades no requieren un campo de respaldo y pueden devolver valores dinámicamente. Completamos dos ejemplos, uno para implementar algunas variables que describen a un ser humano, y el segundo acceder al humano desde el editor.</p>

<p><center><a href="" class="button"><i class="fa fa-caret-right" aria-hidden="true"></i> Siguiente - Métodos(Dev)</a></p>

<p><center><img src="/img/ref.png" alt="001" /></center></p>


		
	</section>
    </div>

    <footer class="site-footer">
	<p class="text">&copy; 2022 - Moon Antonio</p>
</footer>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-89564434-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>
